"use strict";(self.webpackChunkeasycredit_react_app=self.webpackChunkeasycredit_react_app||[]).push([[513],{97513:function(e,r,n){n.r(r),n.d(r,{default:function(){return O}});var t=n(29439),o=n(72791),s=n(61889),i=n(5289),a=n(65661),c=n(39157),l=n(93006),u=n(97123),d=n(36151),h=n(80928),_=n(23735),m=n(91923),p=n(39230),f=n(74569),x=n.n(f),y=n(56960),v=n(87936),g=n.n(v),Z=n(83714),j=n(82059),b=n(16871),P=n(80184),A=function(e){var r=e.verifyPopUp,n=e.setVerifyPopUp,t=e.userData,o=(0,b.s0)();return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(i.Z,{open:r,children:[(0,P.jsxs)(a.Z,{sx:{fontSize:"1.2rem",textAlign:"center"},children:["Are you ",t.first_name+" "+t.last_name,"?"]}),(0,P.jsxs)(u.Z,{sx:{justifyContent:"center"},children:[(0,P.jsx)(d.Z,{onClick:function(){n(!1),o("/lead/createlead/".concat(encodeURIComponent(t.ph_number)),{state:t})},variant:"contained",color:"success",sx:{mr:2},children:"Yes"}),(0,P.jsx)(d.Z,{onClick:function(){return y.Am.error("This mobile number is already registered with customer"),n(!1),o("/lead/verify-phonenumber")},variant:"contained",color:"error",children:"No"})]})]})})},C=n(96849),T=(n(88329),n(89704)),k=n.n(T),S="https://sandbox.credithive.co.uk/webservices",O=function(){var e=(0,b.s0)(),r=(0,C.E)().user,n=null;r&&(n=r.token);var f=(0,o.useState)(""),v=(0,t.Z)(f,2),T=v[0],O=v[1],w=(0,o.useState)(""),z=(0,t.Z)(w,2),U=z[0],E=z[1],D=(0,o.useState)(!1),q=(0,t.Z)(D,2),F=q[0],I=q[1],M=(0,o.useState)("IN"),N=(0,t.Z)(M,2),R=N[0],V=N[1],W=(0,o.useState)(),B=(0,t.Z)(W,2),Y=B[0],G=B[1],L=(0,o.useState)(!0),$=(0,t.Z)(L,2),H=$[0],J=($[1],(0,o.useState)(!1)),K=(0,t.Z)(J,2),Q=K[0],X=K[1],ee=(0,o.useState)(!1),re=(0,t.Z)(ee,2),ne=re[0],te=re[1],oe=(0,o.useState)(""),se=(0,t.Z)(oe,2),ie=se[0],ae=se[1],ce=(0,p.$G)().t;return(0,P.jsxs)(P.Fragment,{children:[ne&&(0,P.jsx)(A,{verifyPopUp:ne,setVerifyPopUp:te,userData:ie}),(0,P.jsx)(s.ZP,{open:H,children:H?(0,P.jsx)(_.Z,{title:ce("Enter_Your_Mobile_Number_to_Continue"),children:(0,P.jsx)(s.ZP,{container:!0,spacing:m.dv,children:(0,P.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,P.jsx)(h.Z,{children:(0,P.jsx)("form",{children:(0,P.jsxs)(s.ZP,{container:!0,direction:"column",spacing:2,children:[(0,P.jsx)(s.ZP,{item:!0,children:(0,P.jsx)(g(),{defaultCountry:"in",label:ce("mobile_Number"),value:T,onChange:function(e){O(e)},fullWidth:!0,required:!0,countryCodeEditable:!0,onCountryChange:function(e){return V(e.dialCode)}})}),(0,P.jsxs)(i.Z,{open:Q,children:[(0,P.jsx)(a.Z,{sx:{fontSize:"1.2rem"},children:ce("please_Enter_your_Date_of_Birth")}),(0,P.jsx)(c.Z,{children:(0,P.jsx)(l.Z,{value:Y,type:"date",fullWidth:!0,onChange:function(e){G(e.target.value)}})}),(0,P.jsxs)(u.Z,{children:[(0,P.jsx)(d.Z,{onClick:function(){if(Y){var e={headers:{Authorization:"Token "+n}},r={dob:Y,recipient:T};try{x().post(S+"/v2/dob_verify/",r,e).then((function(e){e.data.status&&(X(!1),y.Am.success(e.data.message),ae(e.data.data),te(!0))}))}catch(t){console.log(t)}}else y.Am.error(ce("please_enter_DOB"))},color:"primary",children:ce("submit")}),(0,P.jsx)(d.Z,{onClick:function(){return X(!1)},color:"primary",children:ce("close")})]})]}),F?(0,P.jsxs)(o.Fragment,{children:[(0,P.jsx)(s.ZP,{item:!0,children:(0,P.jsx)(l.Z,{label:"OTP",value:U,onChange:function(e){var r=e.target.value.toUpperCase();E(r)},fullWidth:!0,required:!0,variant:"standard",inputProps:{maxLength:6}})}),(0,P.jsxs)(s.ZP,{item:!0,children:[(0,P.jsx)(d.Z,{size:"large",variant:"contained",color:"secondary",onClick:function(){if(U){var r=(0,j.h)(T,R),t={otp:U,recipient:r.number,otp_type:"M"},o={headers:{Authorization:"Token "+n}};try{x().post(S+"/v2/otp_verify/",t,o).then((function(n){if(console.log(n),400===n.status?y.Am.error(n.message):500===n.status&&y.Am.error("Internal server error"),n.status){O(n.data.data.recipient),y.Am.success("OTP Verified successfully"),console.log(n.data.data.user_found);var t=function(e){try{return k().AES.encrypt(e,"credithive_anshu").toString()}catch(r){return console.error("Encryption error:",r),null}}(r.number);if(!1===n.data.data.user_found)return e("/lead/createlead/".concat(encodeURIComponent(t)),{state:{ph_number:r.number}});X(!0)}else y.Am.error(ce("invalid_OTP"))}))}catch(s){y.Am.error(ce("error_while_sending_OTP")),console.log(s)}}else y.Am.error(ce("please_enter_OTP"))},children:ce("Verify_OTP")}),(0,P.jsx)(d.Z,{size:"large",onClick:function(){try{var e=(0,j.h)(T,R);console.log(e,e.country);var r={recipient:e.number,otp_type:"M",cc_code:e.country,debug:!1,is_resend:!0},t={headers:{Authorization:"Token "+n}};x().post(S+"/v2/request_otp/",r,t).then((function(e){y.Am.success(ce("oTP_Resend")),console.log(e.data,"Data"),console.log(e.data.status,"Success")})).catch((function(e){y.Am.error(ce("error_while_sending_OTP")),console.log(e)}))}catch(o){y.Am.error(ce("error_while_sending_OTP")),console.log(o)}},children:ce("Resend_OTP")})]})]},"otpForm"):(0,P.jsx)(s.ZP,{item:!0,mt:2,children:(0,P.jsx)(d.Z,{type:"button",onClick:function(){if(T)if((0,Z.y)(T,R))try{var e=(0,j.h)(T,R),r={recipient:e.number,otp_type:"M",cc_code:e.country,debug:!1,is_resend:!1},t={headers:{Authorization:"Token "+n}};x().post(S+"/v2/request_otp/",r,t).then((function(e){y.Am.success(ce("oTP_sent_successfully")),setTimeout((function(){I(!0)}))})).catch((function(e){y.Am.error(ce("error_while_sending_OTP"))}))}catch(o){y.Am.error(ce("error_while_sending_OTP"))}else y.Am.error(ce("please_enter_a_valid_mobile_number"));else y.Am.error(ce("please_enter_a_mobile_number"))},size:"large",variant:"contained",color:"secondary",children:ce("Send_OTP")})})]})})})})})}):""})]})}}}]);
//# sourceMappingURL=513.1f0aee81.chunk.js.map